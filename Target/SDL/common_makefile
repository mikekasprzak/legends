# - ------------------------------------------------------------------------ - #
include Target/common_tools
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
# Compiler and Linker Flags (NOTE: Optimizations are in Target/common_tools) #
CFLAGS				+=	-fno-strict-aliasing
CPPFLAGS			+=	-fno-rtti -fno-strict-aliasing
LDFLAGS				+=	
# - ------------------------------------------------------------------------ - #

# - ------------------------------------------------------------------------ - #
SRC_FILTER			:=	$(addsuffix /%,$(SRC_FOLDERS))
# - ------------------------------------------------------------------------ - #
ALL_CODE_FILES		:=	$(shell $(TreeTool) src .cpp .c .hpp .h)

CODE_FILES			:=	$(filter %.cpp %.c,$(filter $(SRC_FILTER),$(ALL_CODE_FILES)))
H_FILES				:=	$(filter %.hpp %.h,$(filter $(SRC_FILTER),$(ALL_CODE_FILES)))

INCLUDES			:=	$(addprefix -I,$(INCLUDE_FOLDERS) $(SRC_FOLDERS))
DEFINES				:=	$(addprefix -D,$(DEFINES))
# - ------------------------------------------------------------------------ - #
.O_FILES			:=	$(addprefix obj/$(TARGET_NAME)/,$(addsuffix .o,$(filter-out $(IGNORE_LIST),$(CODE_FILES))))
.O_FOLDERS			:=	$(sort $(dir $(.O_FILES)))
FOLDER_STUBS		:=	$(addsuffix _stub,$(.O_FOLDERS))
# - ------------------------------------------------------------------------ - #
TARGET_STUBS		:=	obj/$(TARGET_NAME)/output_stub
# - ------------------------------------------------------------------------ - #
#OTHER_FILES			:=	$(shell $(TreeTool) $(FILES_FOLDER) %)
#OTHER_FILES_DEP		:=	$(subst $(FILES_FOLDER)/,output/$(TARGET_NAME)/,$(OTHER_FILES))
# - ------------------------------------------------------------------------ - #
#output/$(TARGET_NAME)/%: $(FILES_FOLDER)/%
#	cp $< $@
# - ------------------------------------------------------------------------ - #




# - ------------------------------------------------------------------------ - #
info:
	@echo '* TARGET_NAME * $(TARGET_NAME)'
	@echo '----------'
	@echo '* SRC_FOLDERS * $(SRC_FOLDERS)'
	@echo '* INCLUDE_FOLDERS * $(INCLUDE_FOLDERS)'
	@echo '* COPY_FILES * $(COPY_FILES)'
	@echo '* CFLAGS * $(CFLAGS)'
	@echo '* CPPFLAGS * $(CPPFLAGS)'
	@echo '* LDFLAGS * $(LDFLAGS)'
	@echo '----------'
	@echo '* INCLUDES * $(INCLUDES)'
	@echo '* LIBRARIES * $(LIBRARIES)'
	@echo '* DEFINES * $(DEFINES)'
# - ------------------------------------------------------------------------ - #
	